# Release Notes - v1.1.1

**Release Date:** 2025-12-22

## ðŸ› Bug Fixes

### Python 3.13 Compatibility Issue

Fixed critical bug where the MCP server would timeout during initialization when running on Python 3.13.

**Symptoms:**
- Server hangs on `initialize` request from Claude Desktop
- Timeout after 60 seconds with error: `MCP error -32001: Request timed out`
- Server process never responds to initial handshake

**Root Cause:**
- The MCP SDK 1.25.0 has known compatibility issues with Python 3.13+
- `from mcp.server import Server` would hang indefinitely during import
- Additionally, blocking I/O during `WithingsAuth.__init__()` could delay initialization

**Solution:**
1. **Python Version Constraint:** Restricted supported Python versions to 3.10-3.12 in `pyproject.toml`
2. **Lazy Loading:** Implemented lazy-loading for `.env` file path lookup to prevent blocking I/O during initialization
3. **Documentation:** Added Python version requirements and troubleshooting guide to README

## ðŸ“ Changes

### Code Changes
- `pyproject.toml`: Updated `requires-python` to `>=3.10,<3.13`
- `auth.py`: Converted `env_file` to lazy-loaded property to defer filesystem operations
- Version bump: `0.1.0` â†’ `1.1.1`

### Documentation Updates
- Added **Requirements** section with Python version constraints
- Updated installation instructions to explicitly use `python3.12`
- Added **Troubleshooting** section with:
  - Server initialization timeout fixes
  - Python version check commands
  - Virtual environment recreation steps
  - Token refresh guidance

## âš ï¸ Breaking Changes

None. This is a bug fix release.

## ðŸ”§ Migration Guide

If you're experiencing initialization timeouts:

1. **Check your Python version:**
   ```bash
   /path/to/.venv/bin/python --version
   ```

2. **If running Python 3.13+, recreate your virtual environment:**
   ```bash
   rm -rf .venv
   python3.12 -m venv .venv
   source .venv/bin/activate
   pip install -e .
   ```

3. **Update your Claude Desktop config** (if needed):
   The Python path in `claude_desktop_config.json` should point to the new venv.

## ðŸ“¦ Installation

```bash
# Clone the repository
git clone https://github.com/schimmmi/withings-mcp-server.git
cd withings-mcp-server

# Create virtual environment with Python 3.12 or lower
python3.12 -m venv .venv
source .venv/bin/activate

# Install dependencies
pip install -e .
```

## ðŸ™ Credits

Thanks to the community for reporting this issue and helping debug the Python 3.13 compatibility problem.

---

**Full Changelog:** https://github.com/schimmmi/withings-mcp-server/compare/v1.1.0...v1.1.1
